{"remainingRequest":"/Users/shl/Desktop/MossÁΩóÊù∞ËΩØÂ∑•/frontend/buaa2022-db/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shl/Desktop/MossÁΩóÊù∞ËΩØÂ∑•/frontend/buaa2022-db/src/views/HomeView/components/foodCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shl/Desktop/MossÁΩóÊù∞ËΩØÂ∑•/frontend/buaa2022-db/src/views/HomeView/components/foodCard.vue","mtime":1680943788619},{"path":"/Users/shl/Desktop/MossÁΩóÊù∞ËΩØÂ∑•/frontend/buaa2022-db/node_modules/cache-loader/dist/cjs.js","mtime":1680943968418},{"path":"/Users/shl/Desktop/MossÁΩóÊù∞ËΩØÂ∑•/frontend/buaa2022-db/node_modules/babel-loader/lib/index.js","mtime":1680943970633},{"path":"/Users/shl/Desktop/MossÁΩóÊù∞ËΩØÂ∑•/frontend/buaa2022-db/node_modules/cache-loader/dist/cjs.js","mtime":1680943968418},{"path":"/Users/shl/Desktop/MossÁΩóÊù∞ËΩØÂ∑•/frontend/buaa2022-db/node_modules/vue-loader/lib/index.js","mtime":1680943969372}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0Q29tbWVudHMsIGNyZWF0ZUNvbW1lbnQsIGRlbGV0ZUNvbW1lbnR9IGZyb20gIkAvYXBpL2NvbW1lbnQiOwppbXBvcnQgVGV4dEJveCBmcm9tICJAL2NvbXBvbmVudHMvQ29tbWVudC9UZXh0Qm94IjsKaW1wb3J0IHthZGRGYXZvciwgZGVsRmF2b3IsIGZldGNoRmF2b3IsIGlzRmF2b3J9IGZyb20gIkAvYXBpL2Zhdm9yIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZm9vZENhcmQiLAogIGNvbXBvbmVudHM6IHtUZXh0Qm94fSwKICBwcm9wczogWydkaXNoX2lkJywgJ2Rpc2hfbmFtZScsICdjYW50ZWVuJywgJ2Rpc2hfcHJpY2UnLCAnaW5mbycsICdkaXNoX3N0YXInLCAnZGlzaF90YWcnLCAnc2hvd0Nyb3duJywgJ2Rpc2hfcGljJ10sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIHRleHRCb3g6IGZhbHNlLAogICAgICB1c2VyX2lkOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJfaWQsCiAgICAgIGJvb2ttYXJrZmxhZzogdHJ1ZSwKICAgICAgcGFnZTogMSwKICAgICAgbnVtT2ZDb21tZW50c19wZXJwYWdlOiA1LAogICAgICBzZWxlY3RlZDogWzJdLAogICAgICBjb21tZW50czogWwogICAgICAgIHsKICAgICAgICAgIGFjdGlvbjogJzE1IG1pbicsCiAgICAgICAgICBoZWFkbGluZTogJ0JydW5jaCB0aGlzIHdlZWtlbmQ/JywKICAgICAgICAgIHRpdGxlOiAnQWxpIENvbm5vcnMnLAogICAgICAgICAgc3VidGl0bGU6ICJJJ2xsIGJlIGluIHlvdXIgbmVpZ2hib3Job29kIGRvaW5nIGVycmFuZHMgdGhpcyB3ZWVrZW5kLiBEbyB5b3Ugd2FudCB0byBoYW5nIG91dD8iLAogICAgICAgIH0KICAgICAgXSwKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmlzZmF2b3IoKQogIH0sCiAgbWV0aG9kczogewogICAgaXNmYXZvcigpIHsKICAgICAgbGV0IERpZCA9IHsKICAgICAgICB1c2VyX2lkOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJfaWQsCiAgICAgICAgZGlzaF9pZDogdGhpcy5kaXNoX2lkCiAgICAgIH0KICAgICAgY29uc29sZS5sb2coRGlkKQogICAgICBpc0Zhdm9yKERpZCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBsZXQgZmxhZyA9IHJlc3BvbnNlLmRhdGEuaXNmYXZvcgogICAgICAgIHRoaXMuYm9va21hcmtmbGFnID0gZmxhZyA9PT0gMTsKICAgICAgfSkKICAgIH0sCiAgICBzaG93Rm9vZERldGFpbHMoKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMudXNlcl9pZCkKICAgICAgdGhpcy5kaWFsb2cgPSB0cnVlCiAgICAgIHRoaXMuaGFuZGxlR2V0Q29tbWVudHMoKQogICAgfSwKICAgIHNob3dDb21tZW50VGV4dEJveCgpIHsKICAgICAgdGhpcy50ZXh0Qm94ID0gdHJ1ZQogICAgICBjb25zb2xlLmxvZygidGhpcyBEaXNoSWQgaXM6IiArIHRoaXMuZGlzaF9pZCkKICAgICAgY29uc29sZS5sb2codGhpcy5kaXNoX25hbWUpCiAgICB9LAogICAgam9pbnN0cihzdHJzKSB7CiAgICAgIHJldHVybiBzdHJzLmpvaW4oKQogICAgfSwKICAgIGhhbmRsZURlbGV0ZUNvbW1lbnQocm93KSB7CiAgICAgIGxldCBxdWVyeSA9IHsKICAgICAgICBjb21tZW50X2lkOiByb3cuY29tbWVudF9pZAogICAgICB9CiAgICAgIGRlbGV0ZUNvbW1lbnQocXVlcnkpLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMuaGFuZGxlR2V0Q29tbWVudHMoKQogICAgICAgIH0pCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UKICAgICAgICB9LCAxLjUgKiAxMDAwKQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUdldENvbW1lbnRzKCkgewogICAgICBsZXQgbGlzdF9xdWVyeSA9IHt1c2VyX2lkOiB0aGlzLnVzZXJfaWQsIGRpc2hfaWQ6IHRoaXMuZGlzaF9pZH0KICAgICAgZ2V0Q29tbWVudHMobGlzdF9xdWVyeSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBsZXQgb3JpZ2luRGF0YSA9IHJlc3BvbnNlLmRhdGEuY29tbWVudF9saXN0CiAgICAgICAgY29uc29sZS5sb2cob3JpZ2luRGF0YSkKICAgICAgICBsZXQgbyA9IHt9CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy5jb21tZW50cyA9IFtdCiAgICAgICAgICBmb3IgKG8gaW4gb3JpZ2luRGF0YSkgewogICAgICAgICAgICBsZXQgY29tbWVudCA9IHsKICAgICAgICAgICAgICBjb21tZW50X2lkOiBvcmlnaW5EYXRhW29dLmNvbW1lbnRfaWQsCiAgICAgICAgICAgICAgdXNlcl9pZDogb3JpZ2luRGF0YVtvXS51c2VyX2lkLAogICAgICAgICAgICAgIGFjdGlvbjogJycsCiAgICAgICAgICAgICAgaGVhZGxpbmU6IG9yaWdpbkRhdGFbb10udXNlcl9uYW1lLAogICAgICAgICAgICAgIHRpdGxlOiAn6K+E6K66JywKICAgICAgICAgICAgICBzdWJ0aXRsZTogb3JpZ2luRGF0YVtvXS5jb21tZW50X3RleHQsCiAgICAgICAgICAgICAgY29tbWVudF9zdGFyOiBvcmlnaW5EYXRhW29dLmNvbW1lbnRfc3RhcgogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuY29tbWVudHMucHVzaChjb21tZW50KQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAoKICAgIGJvb2ttYXJrKCkgewogICAgICBsZXQgRGlkID0gewogICAgICAgIHVzZXJfaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlcl9pZCwKICAgICAgICBkaXNoX2lkOiB0aGlzLmRpc2hfaWQKICAgICAgfQogICAgICBpZiAoIXRoaXMuYm9va21hcmtmbGFnKSB7CiAgICAgICAgYWRkRmF2b3IoRGlkKS50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuYm9va21hcmtmbGFnID0gdHJ1ZQogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICdTdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogJ+aIkOWKn+a3u+WKoOaUtuiXjycsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICBkZWxGYXZvcihEaWQpLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5ib29rbWFya2ZsYWcgPSBmYWxzZQogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICdTdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogJ+aUtuiXj+W3suWIoOmZpCcsCiAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIHN0clRvTnVtKHN0cikgewogICAgICByZXR1cm4gTnVtYmVyKHN0cikKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBib29rbWFya2NvbG9yKCkgewogICAgICBpZiAodGhpcy5ib29rbWFya2ZsYWcpIHsKICAgICAgICByZXR1cm4gInBpbmsiCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICJncmV5IgogICAgICB9CiAgICB9LAogICAgZGlzaF9waWN0dXJlKCkgewogICAgICAvL2NvbnNvbGUubG9nKHRoaXMuZGlzaF9uYW1lKQogICAgICByZXR1cm4gImZvb2RpbWFnZS8iICsgdGhpcy5kaXNoX25hbWUgKyAiLnBuZyIKICAgIH0sCiAgICBzdGFyX3N0cigpIHsKICAgICAgcmV0dXJuICLwn5GN77iOIi5yZXBlYXQodGhpcy5kaXNoX3N0YXIpCiAgICB9LAogICAgZGlzaF9zdGFyX251bSgpIHsKICAgICAgcmV0dXJuIE51bWJlcih0aGlzLmRpc2hfc3RhcikKICAgIH0sCgogICAgdG90YWxfcGFnZV9vZl9jb21tZW50cygpIHsKICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLmNvbW1lbnRzLmxlbmd0aCAvIHRoaXMubnVtT2ZDb21tZW50c19wZXJwYWdlKQogICAgfSwKICAgIG51bW9mQ29tbWVudHMoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbW1lbnRzLmxlbmd0aAogICAgfQogIH0KfQo="},{"version":3,"sources":["foodCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0PA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"foodCard.vue","sourceRoot":"src/views/HomeView/components","sourcesContent":["<template>\n  <div>\n    <v-card\n      max-width=\"344\"\n      class=\"mx-auto\"\n      style=\"margin-bottom: 10px;\"\n    >\n      <v-list-item>\n        <v-list-item-avatar color=\"grey\">\n          <v-img src=\"https://pic.imgdb.cn/item/63a5c3aa08b6830163cf7ae9.png\">\n          </v-img>\n        </v-list-item-avatar>\n        <v-list-item-content>\n          <v-list-item-title class=\"headline\">{{ dish_name }}</v-list-item-title>\n          <v-list-item-subtitle>{{ canteen }}</v-list-item-subtitle>\n        </v-list-item-content>\n        <v-list-item-avatar>\n          <v-icon\n            v-show=\"showCrown\"\n            large\n            left\n            color=\"amber darken-1\"\n          >\n            mdi-crown\n          </v-icon>\n        </v-list-item-avatar>\n      </v-list-item>\n\n      <v-img\n        :src=\"dish_pic\"\n        height=\"194\"\n      ></v-img>\n\n\n      <v-card-text style=\"height: 50px;\">\n        {{ info }}\n      </v-card-text>\n\n      <v-card-actions>\n        <v-btn\n          text\n          color=\"deep-purple accent-4\"\n          @click=\"showFoodDetails()\"\n        >\n          Êü•Áúã\n        </v-btn>\n        <v-btn\n          text\n          color=\"deep-purple accent-4\"\n          @click=\"bookmark()\"\n        >\n          Êî∂Ëóè\n        </v-btn>\n        <v-spacer></v-spacer>\n\n        <v-btn icon @click=\"bookmark()\">\n          <v-icon :color=\"bookmarkcolor\">mdi-heart</v-icon>\n        </v-btn>\n        <v-btn @click=\"showCommentTextBox()\" icon>\n          <v-icon>mdi-message-minus</v-icon>\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n\n    <v-row justify=\"center\">\n      <v-dialog v-model=\"textBox\" width=\"600px\">\n        <v-toolbar\n          color=\"orange lighten-1\"\n          dark\n        >\n          <v-toolbar-title>ÂèëË°®ËØÑËÆ∫</v-toolbar-title>\n          <v-spacer></v-spacer>\n          <v-btn icon @click=\"textBox=false\">\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n        </v-toolbar>\n        <text-box\n          :dish_id=\"this.dish_id\"\n          @close=\"textBox = false\"\n        ></text-box>\n      </v-dialog>\n    </v-row>\n\n\n    <v-row justify=\"center\">\n      <v-dialog v-model=\"dialog\" width=\"600px\">\n\n        <v-card\n          max-width=\"600px\"\n          class=\"mx-auto\"\n        >\n          <v-toolbar\n            color=\"orange lighten-1\"\n            dark\n          >\n            <v-app-bar-nav-icon></v-app-bar-nav-icon>\n\n            <v-toolbar-title>ËèúÂìÅËØ¶ÊÉÖ</v-toolbar-title>\n\n            <v-spacer></v-spacer>\n\n            <v-btn icon>\n              <v-icon>mdi-magnify</v-icon>\n            </v-btn>\n\n            <v-btn icon @click=\"dialog = false\">\n              <v-icon>mdi-checkbox-marked-circle</v-icon>\n            </v-btn>\n          </v-toolbar>\n          <br/>\n          <v-container>\n            <v-row dense>\n\n\n              <v-col\n                cols=\"12\"\n              >\n                <v-card\n                  color=\"orange lighten-3\"\n\n                >\n                  <div class=\"d-flex flex-no-wrap justify-space-between\">\n                    <div>\n                      <v-card-title\n                        class=\"headline\"\n                        v-text=\"dish_name\"\n                      ></v-card-title>\n\n                      <v-card-text>\n                        <v-row\n                          align=\"center\"\n                          class=\"mx-0\"\n                        >\n                          <v-rating\n                            :value=\"dish_star_num\"\n                            color=\"pink lighten-1\"\n                            dense\n                            half-increments\n                            readonly\n                            size=\"14\"\n                          ></v-rating>\n\n                          <div class=\"grey--text ml-4\">{{ dish_star }}({{ numofComments }})\n                            Âè£Âë≥:{{ joinstr(dish_tag) }}\n                          </div>\n                        </v-row>\n\n                        <div class=\"my-4 subtitle-1\">\n                          ¬•{{ dish_price }}\n                        </div>\n\n                        <div>{{ info }}</div>\n                      </v-card-text>\n                    </div>\n\n                    <v-avatar\n                      class=\"ma-3\"\n                      size=\"160\"\n                    >\n                      <v-img :src=\"dish_pic\"></v-img>\n                    </v-avatar>\n                  </div>\n                </v-card>\n              </v-col>\n            </v-row>\n          </v-container>\n\n          <v-data-iterator\n            :items=\"comments\"\n            :page=\"page\"\n            :items-per-page.sysc=\"numOfComments_perpage\"\n            no-data-text=\"ÊöÇÊó†ËØÑËÆ∫\"\n            hide-default-footer\n          >\n            <template v-slot:default=\"props\">\n              <v-list two-line>\n                <v-list-item-group\n                  v-model=\"selected\"\n                  multiple\n                  active-class=\"orange--text\"\n                >\n                  <template v-for=\"item in props.items\">\n                    <v-list-item :key=\"item.title\">\n                      <template v-slot:default=\"{ active, toggle }\">\n                        <v-list-item-content>\n                          <v-col cols=\"10\">\n                            <v-list-item-title v-text=\"item.title\"></v-list-item-title>\n                            <v-list-item-subtitle class=\"text--primary\" v-text=\"item.headline\"></v-list-item-subtitle>\n                            <span v-html=\"item.subtitle\"></span>\n                            <v-row\n                              align=\"center\"\n                              class=\"mx-0\"\n                            >\n                              <v-rating\n                                :value=\"item.comment_star\"\n                                color=\"pink lighten-1\"\n                                dense\n                                half-increments\n                                readonly\n                                size=\"14\"\n                              ></v-rating>\n\n                              <div class=\"grey--text ml-4\">{{ item.comment_star }}</div>\n                            </v-row>\n                          </v-col>\n                          <v-col cols=\"1\">\n                            <v-btn\n                              v-if=\"Number(user_id) === item.user_id\"\n                              @click=\"handleDeleteComment(item)\"\n                              depressed\n                              right\n                              fab\n                              light\n                              small\n                              style=\"position: absolute;margin-left: 40px\"\n                            >\n                              <v-icon>\n                                mdi-delete\n                              </v-icon>\n                            </v-btn>\n                          </v-col>\n                        </v-list-item-content>\n\n                      </template>\n                    </v-list-item>\n\n                  </template>\n                </v-list-item-group>\n              </v-list>\n\n\n            </template>\n          </v-data-iterator>\n\n          <v-pagination\n            v-model=\"page\"\n            :length=\"total_page_of_comments\"\n            :total-visible=\"7\"\n          ></v-pagination>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"green darken-1\" text @click=\"dialog = false\">ËøîÂõû</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </v-row>\n  </div>\n</template>\n\n<script>\nimport {getComments, createComment, deleteComment} from \"@/api/comment\";\nimport TextBox from \"@/components/Comment/TextBox\";\nimport {addFavor, delFavor, fetchFavor, isFavor} from \"@/api/favor\";\n\nexport default {\n  name: \"foodCard\",\n  components: {TextBox},\n  props: ['dish_id', 'dish_name', 'canteen', 'dish_price', 'info', 'dish_star', 'dish_tag', 'showCrown', 'dish_pic'],\n  data() {\n    return {\n      dialog: false,\n      textBox: false,\n      user_id: this.$store.state.user.user_id,\n      bookmarkflag: true,\n      page: 1,\n      numOfComments_perpage: 5,\n      selected: [2],\n      comments: [\n        {\n          action: '15 min',\n          headline: 'Brunch this weekend?',\n          title: 'Ali Connors',\n          subtitle: \"I'll be in your neighborhood doing errands this weekend. Do you want to hang out?\",\n        }\n      ],\n    }\n  },\n  created() {\n    this.isfavor()\n  },\n  methods: {\n    isfavor() {\n      let Did = {\n        user_id: this.$store.state.user.user_id,\n        dish_id: this.dish_id\n      }\n      console.log(Did)\n      isFavor(Did).then((response) => {\n        let flag = response.data.isfavor\n        this.bookmarkflag = flag === 1;\n      })\n    },\n    showFoodDetails() {\n      console.log(this.user_id)\n      this.dialog = true\n      this.handleGetComments()\n    },\n    showCommentTextBox() {\n      this.textBox = true\n      console.log(\"this DishId is:\" + this.dish_id)\n      console.log(this.dish_name)\n    },\n    joinstr(strs) {\n      return strs.join()\n    },\n    handleDeleteComment(row) {\n      let query = {\n        comment_id: row.comment_id\n      }\n      deleteComment(query).then(() => {\n        this.$nextTick(() => {\n          this.handleGetComments()\n        })\n        setTimeout(() => {\n          this.listLoading = false\n        }, 1.5 * 1000)\n      })\n    },\n    handleGetComments() {\n      let list_query = {user_id: this.user_id, dish_id: this.dish_id}\n      getComments(list_query).then((response) => {\n        let originData = response.data.comment_list\n        console.log(originData)\n        let o = {}\n        this.$nextTick(() => {\n          this.comments = []\n          for (o in originData) {\n            let comment = {\n              comment_id: originData[o].comment_id,\n              user_id: originData[o].user_id,\n              action: '',\n              headline: originData[o].user_name,\n              title: 'ËØÑËÆ∫',\n              subtitle: originData[o].comment_text,\n              comment_star: originData[o].comment_star\n            }\n            this.comments.push(comment)\n          }\n        })\n      })\n    },\n\n    bookmark() {\n      let Did = {\n        user_id: this.$store.state.user.user_id,\n        dish_id: this.dish_id\n      }\n      if (!this.bookmarkflag) {\n        addFavor(Did).then(() => {\n          this.bookmarkflag = true\n          this.$notify({\n            title: 'Success',\n            message: 'ÊàêÂäüÊ∑ªÂä†Êî∂Ëóè',\n            type: 'success',\n            duration: 2000\n          })\n        })\n      } else {\n        delFavor(Did).then(() => {\n          this.bookmarkflag = false\n          this.$notify({\n            title: 'Success',\n            message: 'Êî∂ËóèÂ∑≤Âà†Èô§',\n            type: 'warning',\n            duration: 2000\n          })\n        })\n      }\n    },\n    strToNum(str) {\n      return Number(str)\n    }\n  },\n  computed: {\n    bookmarkcolor() {\n      if (this.bookmarkflag) {\n        return \"pink\"\n      } else {\n        return \"grey\"\n      }\n    },\n    dish_picture() {\n      //console.log(this.dish_name)\n      return \"foodimage/\" + this.dish_name + \".png\"\n    },\n    star_str() {\n      return \"üëçÔ∏é\".repeat(this.dish_star)\n    },\n    dish_star_num() {\n      return Number(this.dish_star)\n    },\n\n    total_page_of_comments() {\n      return Math.ceil(this.comments.length / this.numOfComments_perpage)\n    },\n    numofComments() {\n      return this.comments.length\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}