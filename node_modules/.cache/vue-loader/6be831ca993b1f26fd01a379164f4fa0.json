{"remainingRequest":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/src/views/HomeView/components/foodcard2.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/src/views/HomeView/components/foodcard2.vue","mtime":1680943788619},{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/cache-loader/dist/cjs.js","mtime":1680943968418},{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/babel-loader/lib/index.js","mtime":1680943970633},{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/cache-loader/dist/cjs.js","mtime":1680943968418},{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/vue-loader/lib/index.js","mtime":1680943969372}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7ZGVsZXRlQ29tbWVudCwgZ2V0Q29tbWVudHN9IGZyb20gIkAvYXBpL2NvbW1lbnQiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJmb29kY2FyZDIiLAogIHByb3BzOiBbJ2Rpc2hfaWQnLCAnZGlzaF9uYW1lJywgJ2NhbnRlZW5fbmFtZScsICdkaXNoX3ByaWNlJywgJ2Rpc2hfaW5mbycsICdkaXNoX3N0YXInLCAnZGlzaF90YWcnLCdkaXNoX3BpYyddLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2c6ZmFsc2UsCiAgICAgIHBhZ2U6IDEsCiAgICAgIG51bU9mQ29tbWVudHNfcGVycGFnZTogNSwKICAgICAgdXNlcl9pZDogdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VyX2lkLAogICAgICBzZWxlY3RlZDogWzJdLAogICAgICBjb21tZW50czogWwogICAgICAgIHsKICAgICAgICAgIGFjdGlvbjogJzE1IG1pbicsCiAgICAgICAgICBoZWFkbGluZTogJ0JydW5jaCB0aGlzIHdlZWtlbmQ/JywKICAgICAgICAgIHRpdGxlOiAnQWxpIENvbm5vcnMnLAogICAgICAgICAgc3VidGl0bGU6ICJJJ2xsIGJlIGluIHlvdXIgbmVpZ2hib3Job29kIGRvaW5nIGVycmFuZHMgdGhpcyB3ZWVrZW5kLiBEbyB5b3Ugd2FudCB0byBoYW5nIG91dD8iLAogICAgICAgIH0KICAgICAgXSwKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBudW1vZkNvbW1lbnRzKCkgewogICAgICByZXR1cm4gdGhpcy5jb21tZW50cy5sZW5ndGgKICAgIH0sCiAgICBkaXNoX3N0YXJfbnVtKCkgewogICAgICByZXR1cm4gTnVtYmVyKHRoaXMuZGlzaF9zdGFyKQogICAgfSwKICAgIHRvdGFsX3BhZ2Vfb2ZfY29tbWVudHMoKSB7CiAgICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy5jb21tZW50cy5sZW5ndGggLyB0aGlzLm51bU9mQ29tbWVudHNfcGVycGFnZSkKICAgIH0KICB9LAogIG1ldGhvZHM6ewogICAgc2hvd0Zvb2REZXRhaWxzKCkgewogICAgICAvL2NvbnNvbGUubG9nKHRoaXMudXNlcl9pZCkKICAgICAgdGhpcy5kaWFsb2cgPSB0cnVlCiAgICAgIHRoaXMuaGFuZGxlR2V0Q29tbWVudHMoKQogICAgfSwKICAgIGhhbmRsZURlbGV0ZUNvbW1lbnQoKSB7CiAgICAgIGxldCBxdWVyeSA9IHsKICAgICAgICBjb21tZW50X2lkOiAxCiAgICAgIH0KICAgICAgZGVsZXRlQ29tbWVudChxdWVyeSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy5oYW5kbGVHZXRDb21tZW50cygpCiAgICAgICAgfSkKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZQogICAgICAgIH0sIDEuNSAqIDEwMDApCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlR2V0Q29tbWVudHMoKSB7CiAgICAgIGxldCBsaXN0X3F1ZXJ5ID0ge3VzZXJfaWQ6IHRoaXMudXNlcl9pZCwgZGlzaF9pZDogdGhpcy5kaXNoX2lkfQogICAgICBnZXRDb21tZW50cyhsaXN0X3F1ZXJ5KS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIGxldCBvcmlnaW5EYXRhID0gcmVzcG9uc2UuZGF0YS5jb21tZW50X2xpc3QKICAgICAgICBjb25zb2xlLmxvZyhvcmlnaW5EYXRhKQogICAgICAgIGxldCBvID0ge30KICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICB0aGlzLmNvbW1lbnRzID0gW10KICAgICAgICAgIGZvciAobyBpbiBvcmlnaW5EYXRhKSB7CiAgICAgICAgICAgIGxldCBjb21tZW50ID0gewogICAgICAgICAgICAgIGFjdGlvbjogJycsCiAgICAgICAgICAgICAgaGVhZGxpbmU6IG9yaWdpbkRhdGFbb10udXNlcl9uYW1lLAogICAgICAgICAgICAgIHRpdGxlOiAn6K+E6K66JywKICAgICAgICAgICAgICBzdWJ0aXRsZTogb3JpZ2luRGF0YVtvXS5jb21tZW50X3RleHQKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmNvbW1lbnRzLnB1c2goY29tbWVudCkKICAgICAgICAgIH0KICAgICAgICAgIGNvbnNvbGUubG9nKCIxMjM0NSIpCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmNvbW1lbnRzKQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZQogICAgICAgICAgfSwgMS41ICogMTAwMCkKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICB9Cn0K"},{"version":3,"sources":["foodcard2.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8NA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"foodcard2.vue","sourceRoot":"src/views/HomeView/components","sourcesContent":["<template>\n  <div>\n\n    <v-container fluid>\n        <v-row dense>\n          <v-col cols=\"12\">\n            <v-card\n              color=\"orange \"\n\n            >\n              <div class=\"d-flex flex-no-wrap justify-space-between\" style=\"margin-left: 15px;\">\n                <div>\n                  <v-card-title\n                    class=\"headline\"\n                    v-text=\"dish_name\"\n                  ></v-card-title>\n\n                  <v-card-subtitle>\n                    {{canteen_name}}\n                  </v-card-subtitle>\n                  <v-card-text>\n                    <v-row\n                      align=\"center\"\n                      class=\"mx-0\"\n                    >\n                      <v-rating\n                        :value=\"dish_star_num\"\n                        color=\"pink lighten-1\"\n                        dense\n                        half-increments\n                        readonly\n                        size=\"14\"\n                      ></v-rating>\n\n                      <div class=\"black--text ml-4\">{{ dish_star }}({{ numofComments }})</div>\n                    </v-row>\n\n                    <div class=\"my-4 subtitle-1\">\n                      ¥{{ dish_price }}\n                    </div>\n\n                    <div>{{ dish_info }}</div>\n                  </v-card-text>\n                  <v-card-actions>\n                    <v-btn\n                      text\n                      color=\"deep-purple accent-4\"\n                      @click=\"showFoodDetails()\"\n                    >\n                      Read Now\n                    </v-btn>\n                  </v-card-actions>\n                </div>\n\n\n                <v-avatar\n                  class=\"ma-3\"\n                  size=\"160\"\n                >\n                  <v-img :src=\"dish_pic\"></v-img>\n                </v-avatar>\n              </div>\n            </v-card>\n          </v-col>\n        </v-row>\n      </v-container>\n\n    <v-row justify=\"center\">\n      <v-dialog v-model=\"dialog\" width=\"600px\">\n\n        <v-card\n          max-width=\"600px\"\n          class=\"mx-auto\"\n        >\n          <v-toolbar\n            color=\"orange lighten-1\"\n            dark\n          >\n            <v-app-bar-nav-icon></v-app-bar-nav-icon>\n\n            <v-toolbar-title>菜品详情</v-toolbar-title>\n\n            <v-spacer></v-spacer>\n\n            <v-btn icon>\n              <v-icon>mdi-magnify</v-icon>\n            </v-btn>\n\n            <v-btn icon @click=\"dialog = false\">\n              <v-icon>mdi-checkbox-marked-circle</v-icon>\n            </v-btn>\n          </v-toolbar>\n          <br/>\n          <v-container>\n            <v-row dense>\n\n\n              <v-col\n                cols=\"12\"\n              >\n                <v-card\n                  color=\"orange lighten-3\"\n\n                >\n                  <div class=\"d-flex flex-no-wrap justify-space-between\">\n                    <div>\n                      <v-card-title\n                        class=\"headline\"\n                        v-text=\"dish_name\"\n                      ></v-card-title>\n\n                      <v-card-text>\n                        <v-row\n                          align=\"center\"\n                          class=\"mx-0\"\n                        >\n                          <v-rating\n                            :value=\"dish_star_num\"\n                            color=\"pink lighten-1\"\n                            dense\n                            half-increments\n                            readonly\n                            size=\"14\"\n                          ></v-rating>\n\n                          <div class=\"grey--text ml-4\">{{ dish_star }}({{ numofComments }}) 口味：{{dish_tag.join()}}</div>\n                        </v-row>\n\n                        <div class=\"my-4 subtitle-1\">\n                          ¥{{ dish_price }}\n                        </div>\n\n                        <div>{{ dish_info }}</div>\n                      </v-card-text>\n                    </div>\n\n                    <v-avatar\n                      class=\"ma-3\"\n                      size=\"160\"\n                    >\n                      <v-img :src=\"dish_pic\"></v-img>\n                    </v-avatar>\n                  </div>\n                </v-card>\n              </v-col>\n            </v-row>\n          </v-container>\n\n          <v-data-iterator\n            :items=\"comments\"\n            :page=\"page\"\n            :items-per-page.sysc=\"numOfComments_perpage\"\n            no-data-text=\"暂无评论\"\n            hide-default-footer\n          >\n            <template v-slot:default=\"props\">\n              <v-list two-line>\n                <v-list-item-group\n                  v-model=\"selected\"\n                  multiple\n                  active-class=\"orange--text\"\n                >\n                  <template v-for=\"item in props.items\">\n                    <v-list-item :key=\"item.title\">\n                      <template v-slot:default=\"{ active, toggle }\">\n                        <v-list-item-content>\n                          <v-list-item-title v-text=\"item.title\"></v-list-item-title>\n                          <v-list-item-subtitle class=\"text--primary\" v-text=\"item.headline\"></v-list-item-subtitle>\n                          <span v-html=\"item.subtitle\"></span>\n                          <v-btn\n                            v-if=\"user_id === item.user_id\"\n                            @click=\"handleDeleteComment()\"\n                          >\n                            <v-icon>\n                              mdi-delete\n                            </v-icon>\n                          </v-btn>\n                        </v-list-item-content>\n\n                        <v-list-item-action>\n                          <v-list-item-action-text v-text=\"item.action\"></v-list-item-action-text>\n                          <v-icon\n                            v-if=\"!active\"\n                            color=\"grey lighten-1\"\n                          >\n                            mdi-star_border\n                          </v-icon>\n\n                          <v-icon\n                            v-else\n                            color=\"pink\"\n                          >\n                            mdi-star\n                          </v-icon>\n                        </v-list-item-action>\n                      </template>\n                    </v-list-item>\n\n                  </template>\n                </v-list-item-group>\n              </v-list>\n\n\n            </template>\n          </v-data-iterator>\n\n          <v-pagination\n            v-model=\"page\"\n            :length=\"total_page_of_comments\"\n            :total-visible=\"7\"\n          ></v-pagination>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"green darken-1\" text @click=\"dialog = false\">返回</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </v-row>\n  </div>\n</template>\n\n<script>\nimport {deleteComment, getComments} from \"@/api/comment\";\n\nexport default {\n  name: \"foodcard2\",\n  props: ['dish_id', 'dish_name', 'canteen_name', 'dish_price', 'dish_info', 'dish_star', 'dish_tag','dish_pic'],\n  data() {\n    return {\n      dialog:false,\n      page: 1,\n      numOfComments_perpage: 5,\n      user_id: this.$store.state.user.user_id,\n      selected: [2],\n      comments: [\n        {\n          action: '15 min',\n          headline: 'Brunch this weekend?',\n          title: 'Ali Connors',\n          subtitle: \"I'll be in your neighborhood doing errands this weekend. Do you want to hang out?\",\n        }\n      ],\n    }\n  },\n  computed: {\n    numofComments() {\n      return this.comments.length\n    },\n    dish_star_num() {\n      return Number(this.dish_star)\n    },\n    total_page_of_comments() {\n      return Math.ceil(this.comments.length / this.numOfComments_perpage)\n    }\n  },\n  methods:{\n    showFoodDetails() {\n      //console.log(this.user_id)\n      this.dialog = true\n      this.handleGetComments()\n    },\n    handleDeleteComment() {\n      let query = {\n        comment_id: 1\n      }\n      deleteComment(query).then(() => {\n        this.$nextTick(() => {\n          this.handleGetComments()\n        })\n        setTimeout(() => {\n          this.listLoading = false\n        }, 1.5 * 1000)\n      })\n    },\n    handleGetComments() {\n      let list_query = {user_id: this.user_id, dish_id: this.dish_id}\n      getComments(list_query).then((response) => {\n        let originData = response.data.comment_list\n        console.log(originData)\n        let o = {}\n        this.$nextTick(() => {\n          this.comments = []\n          for (o in originData) {\n            let comment = {\n              action: '',\n              headline: originData[o].user_name,\n              title: '评论',\n              subtitle: originData[o].comment_text\n            }\n            this.comments.push(comment)\n          }\n          console.log(\"12345\")\n          console.log(this.comments)\n          setTimeout(() => {\n            this.listLoading = false\n          }, 1.5 * 1000)\n        })\n      })\n    },\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}