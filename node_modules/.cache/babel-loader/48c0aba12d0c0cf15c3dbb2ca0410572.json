{"remainingRequest":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/babel-loader/lib/index.js!/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/eslint-loader/index.js??ref--13-0!/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/src/store/modules/user.js","dependencies":[{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/src/store/modules/user.js","mtime":1680948586787},{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/babel.config.js","mtime":1680943788576},{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/cache-loader/dist/cjs.js","mtime":1680943968418},{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/babel-loader/lib/index.js","mtime":1680943970633},{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/eslint-loader/index.js","mtime":1680943968496}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL3NobC9EZXNrdG9wL01vc3NcdTdGNTdcdTY3NzBcdThGNkZcdTVERTUvZnJvbnRlbmQvYnVhYTIwMjItZGIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvc2hsL0Rlc2t0b3AvTW9zc1x1N0Y1N1x1Njc3MFx1OEY2Rlx1NURFNS9mcm9udGVuZC9idWFhMjAyMi1kYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgeyBsb2dpbiBhcyBfbG9naW4sIGxvZ291dCBhcyBfbG9nb3V0LCBnZXRJbmZvLCByZWdpc3RlciBhcyBfcmVnaXN0ZXIsIGdldFByb2ZpbGUgfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiwgc2V0VXNlcklkLCByZW1vdmVVc2VySWQsIGdldFVzZXJJZCwgcmVtb3ZlUm9sZSwgc2V0Um9sZSB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCByb3V0ZXIsIHsgcmVzZXRSb3V0ZXIgfSBmcm9tICdAL3JvdXRlcic7CnZhciBzdGF0ZSA9IHsKICB0b2tlbjogZ2V0VG9rZW4oKSwKICBuYW1lOiAnJywKICBhdmF0YXI6ICcnLAogIGludHJvZHVjdGlvbjogJycsCiAgcm9sZXM6IFtdLAogIHVzZXJfaWQ6IGdldFVzZXJJZCgpCn07CnZhciBtdXRhdGlvbnMgPSB7CiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX0lOVFJPRFVDVElPTjogZnVuY3Rpb24gU0VUX0lOVFJPRFVDVElPTihzdGF0ZSwgaW50cm9kdWN0aW9uKSB7CiAgICBzdGF0ZS5pbnRyb2R1Y3Rpb24gPSBpbnRyb2R1Y3Rpb247CiAgfSwKICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgIHN0YXRlLm5hbWUgPSBuYW1lOwogIH0sCiAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXI7CiAgfSwKICBTRVRfUk9MRVM6IGZ1bmN0aW9uIFNFVF9ST0xFUyhzdGF0ZSwgcm9sZXMpIHsKICAgIHN0YXRlLnJvbGVzID0gcm9sZXM7CiAgfSwKICBTRVRfVVNFUl9JRDogZnVuY3Rpb24gU0VUX1VTRVJfSUQoc3RhdGUsIHVzZXJfaWQpIHsKICAgIHN0YXRlLnVzZXJfaWQgPSB1c2VyX2lkICsgJyc7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvL3VzZXIgcmVnaXN0ZXIKICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoX3JlZiwgdXNlckluZm8pIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIHZhciB1c2VyX25hbWUgPSB1c2VySW5mby51c2VyX25hbWUsCiAgICAgIHBhc3N3b3JkID0gdXNlckluZm8ucGFzc3dvcmQsCiAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvbiA9IHVzZXJJbmZvLnBhc3N3b3JkX2NvbmZpcm1hdGlvbjsKICAgIGNvbnNvbGUubG9nKHVzZXJJbmZvKTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9yZWdpc3Rlcih7CiAgICAgICAgdXNlcl9uYW1lOiB1c2VyX25hbWUudHJpbSgpLAogICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgICAgICBwYXNzd29yZF9jb25maXJtYXRpb246IHBhc3N3b3JkX2NvbmZpcm1hdGlvbgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIGNvbnN0IHtkYXRhfSA9IHJlc3BvbnNlCiAgICAgICAgLy8gY29tbWl0KCdTRVRfVE9LRU4nLCBkYXRhLnRva2VuKS8vPwogICAgICAgIC8vIGNvbW1pdCgnU0VUX1VTRVJfSUQnLCBkYXRhLnVzZXJfaWQpCiAgICAgICAgLy8gc2V0VG9rZW4oZGF0YS50b2tlbikvLz8KICAgICAgICAvLyBzZXRVc2VySWQoZGF0YS51c2VyX2lkKQogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHVzZXIgbG9naW4g5pS55ZCN5a2XCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYyLCB1c2VySW5mbykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgIHZhciB1c2VybmFtZSA9IHVzZXJJbmZvLnVzZXJuYW1lLAogICAgICBwYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2xvZ2luKHsKICAgICAgICB1c2VyX25hbWU6IHVzZXJuYW1lLnRyaW0oKSwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgLy8gc3RvcmUuZGlzcGF0Y2goJ3VzZXIvcmVzZXRUb2tlbicpCiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCBkYXRhLmxvZ2luX3Rva2VuKTsKICAgICAgICBjb21taXQoJ1NFVF9VU0VSX0lEJywgZGF0YS51c2VyX2lkKTsKICAgICAgICAvL2xldCByb2xlcyA9IFtkYXRhLnVzZXJfcm9sZV0KICAgICAgICAvL2NvbW1pdCgnU0VUX1JPTEVTJywgcm9sZXMpCiAgICAgICAgc2V0VG9rZW4oZGF0YS5sb2dpbl90b2tlbik7CiAgICAgICAgc2V0VXNlcklkKGRhdGEudXNlcl9pZCk7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgZm9yY2VMb2dpbjogZnVuY3Rpb24gZm9yY2VMb2dpbihfcmVmMywgdXNlckluZm8pIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICB2YXIgZGF0YSA9IHsKICAgICAgdXNlcl9pZDogMCwKICAgICAgdXNlcl9uYW1lOiAnYWRtaW4nLAogICAgICB1c2VyX3JvbGU6ICdhZG1pbicsCiAgICAgIHRva2VuOiAnYWRtaW4tdG9rZW4nCiAgICB9OwogICAgY29tbWl0KCdTRVRfVE9LRU4nLCBkYXRhLnRva2VuKTsKICAgIGNvbW1pdCgnU0VUX1VTRVJfSUQnLCBkYXRhLnVzZXJfaWQpOwogICAgc2V0VG9rZW4oZGF0YS50b2tlbik7CiAgICBzZXRVc2VySWQoZGF0YS51c2VyX2lkKTsKICB9LAogIGZvcmNlR2V0SW5mbzogZnVuY3Rpb24gZm9yY2VHZXRJbmZvKF9yZWY0KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWY0LnN0YXRlOwogICAgdmFyIG5hbWUgPSAnYWRtaW4nOwogICAgdmFyIGF2YXRhciA9ICdodHRwczovL3dwaW1nLndhbGxzdGNuLmNvbS9mNzc4NzM4Yy1lNGY4LTQ4NzAtYjYzNC01NjcwM2I0YWNhZmUuZ2lmJzsKICAgIHZhciBpbnRyb2R1Y3Rpb24gPSAndGhpcyBpcyBhbiBhZG1pbic7CiAgICBjb21taXQoJ1NFVF9OQU1FJywgbmFtZSk7CiAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBhdmF0YXIpOwogICAgY29tbWl0KCdTRVRfUk9MRVMnLCBbJ2FkbWluJ10pOwogICAgY29uc29sZS5sb2coIkNPTU1JVCBST0xFOiIgKyBzdGF0ZS5yb2xlcyk7CiAgICBjb21taXQoJ1NFVF9JTlRST0RVQ1RJT04nLCBpbnRyb2R1Y3Rpb24pOwogIH0sCiAgLy8gZ2V0IHVzZXIgaW5mbwogIGdldEluZm86IGZ1bmN0aW9uIGdldEluZm8oX3JlZjUpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNS5jb21taXQsCiAgICAgIHN0YXRlID0gX3JlZjUuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBnZXRQcm9maWxlKHsKICAgICAgICB1c2VyX2lkOiBzdGF0ZS51c2VyX2lkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgIGlmICghZGF0YSkgewogICAgICAgICAgcmVqZWN0KCdWZXJpZmljYXRpb24gZmFpbGVkLCBwbGVhc2UgTG9naW4gYWdhaW4uJyk7CiAgICAgICAgfQogICAgICAgIHZhciB1c2VyX3JvbGUgPSBkYXRhLnVzZXJfcm9sZSwKICAgICAgICAgIHVzZXJfbmFtZSA9IGRhdGEudXNlcl9uYW1lLAogICAgICAgICAgdXNlcl9waWMgPSBkYXRhLnVzZXJfcGljOwoKICAgICAgICAvL2NvbW1pdCgnU0VUX1JPTEVTJywgcm9sZXMpCiAgICAgICAgdmFyIHJvbGVzID0gW3VzZXJfcm9sZV07CiAgICAgICAgY29tbWl0KCdTRVRfTkFNRScsIHVzZXJfbmFtZSk7CiAgICAgICAgaWYgKHVzZXJfcGljID09PSBudWxsKSB7CiAgICAgICAgICB1c2VyX3BpYyA9ICJodHRwczovL2N1YmUuZWxlbWVjZG4uY29tLzMvN2MvM2VhNmJlZWM2NDM2OWMyNjQyYjkyYzY3MjZmMWVwbmcucG5nIjsKICAgICAgICB9CiAgICAgICAgY29tbWl0KCdTRVRfQVZBVEFSJywgdXNlcl9waWMpOwogICAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgcm9sZXMpOwogICAgICAgIGNvbnNvbGUubG9nKCJDT01NSVQgUk9MRToiICsgc3RhdGUucm9sZXMpOwogICAgICAgIC8vY29tbWl0KCdTRVRfSU5UUk9EVUNUSU9OJywgaW50cm9kdWN0aW9uKQogICAgICAgIHJlc29sdmUoZGF0YSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyB1c2VyIGxvZ291dAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWY2KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjYuY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWY2LnN0YXRlLAogICAgICBkaXNwYXRjaCA9IF9yZWY2LmRpc3BhdGNoOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2xvZ291dChzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCAnJyk7CiAgICAgICAgY29tbWl0KCdTRVRfVVNFUl9JRCcsIDApOwogICAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgW10pOwogICAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgICAgcmVtb3ZlVXNlcklkKCk7CiAgICAgICAgcmVtb3ZlUm9sZSgpOwogICAgICAgIHJlc2V0Um91dGVyKCk7CgogICAgICAgIC8vIHJlc2V0IHZpc2l0ZWQgdmlld3MgYW5kIGNhY2hlZCB2aWV3cwogICAgICAgIC8vIHRvIGZpeGVkIGh0dHBzOi8vZ2l0aHViLmNvbS9QYW5KaWFDaGVuL3Z1ZS1lbGVtZW50LWFkbWluL2lzc3Vlcy8yNDg1CiAgICAgICAgZGlzcGF0Y2goJ3RhZ3NWaWV3L2RlbEFsbFZpZXdzJywgbnVsbCwgewogICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHJlbW92ZSB0b2tlbgogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjcpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNy5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCAnJyk7CiAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgW10pOwogICAgICBjb21taXQoJ1NFVF9VU0VSX0lEJywgJycpOwogICAgICByZW1vdmVUb2tlbigpOwogICAgICByZW1vdmVVc2VySWQoKTsKICAgICAgcmVtb3ZlUm9sZSgpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9LAogIC8vIGR5bmFtaWNhbGx5IG1vZGlmeSBwZXJtaXNzaW9ucwogIGNoYW5nZVJvbGVzOiBmdW5jdGlvbiBjaGFuZ2VSb2xlcyhfcmVmOCwgcm9sZSkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGNvbW1pdCwgZGlzcGF0Y2gsIHRva2VuLCBfeWllbGQkZGlzcGF0Y2gsIHJvbGVzLCBhY2Nlc3NSb3V0ZXM7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY4LmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmOC5kaXNwYXRjaDsKICAgICAgICAgICAgdG9rZW4gPSByb2xlICsgJy10b2tlbic7CiAgICAgICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgdG9rZW4pOwogICAgICAgICAgICBzZXRUb2tlbih0b2tlbik7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2dldEluZm8nKTsKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgX3lpZWxkJGRpc3BhdGNoID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcm9sZXMgPSBfeWllbGQkZGlzcGF0Y2gucm9sZXM7CiAgICAgICAgICAgIHJlc2V0Um91dGVyKCk7CgogICAgICAgICAgICAvLyBnZW5lcmF0ZSBhY2Nlc3NpYmxlIHJvdXRlcyBtYXAgYmFzZWQgb24gcm9sZXMKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ3Blcm1pc3Npb24vZ2VuZXJhdGVSb3V0ZXMnLCByb2xlcywgewogICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBhY2Nlc3NSb3V0ZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAvLyBkeW5hbWljYWxseSBhZGQgYWNjZXNzaWJsZSByb3V0ZXMKICAgICAgICAgICAgcm91dGVyLmFkZFJvdXRlcyhhY2Nlc3NSb3V0ZXMpOwoKICAgICAgICAgICAgLy8gcmVzZXQgdmlzaXRlZCB2aWV3cyBhbmQgY2FjaGVkIHZpZXdzCiAgICAgICAgICAgIGRpc3BhdGNoKCd0YWdzVmlldy9kZWxBbGxWaWV3cycsIG51bGwsIHsKICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"names":["login","logout","getInfo","register","getProfile","getToken","setToken","removeToken","setUserId","removeUserId","getUserId","removeRole","setRole","router","resetRouter","state","token","name","avatar","introduction","roles","user_id","mutations","SET_TOKEN","SET_INTRODUCTION","SET_NAME","SET_AVATAR","SET_ROLES","SET_USER_ID","actions","_ref","userInfo","commit","user_name","password","password_confirmation","console","log","Promise","resolve","reject","trim","then","response","catch","error","_ref2","username","data","login_token","forceLogin","_ref3","user_role","forceGetInfo","_ref4","_ref5","user_pic","_ref6","dispatch","root","resetToken","_ref7","changeRoles","_ref8","role","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$dispatch","accessRoutes","wrap","_callee$","_context","prev","next","sent","addRoutes","stop","namespaced"],"sources":["/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/src/store/modules/user.js"],"sourcesContent":["import {login, logout, getInfo, register, getProfile} from '@/api/user'\nimport {\n  getToken,\n  setToken,\n  removeToken,\n  setUserId,\n  removeUserId,\n  getUserId,\n  removeRole,\n  setRole,\n} from '@/utils/auth'\nimport router, {resetRouter} from '@/router'\n\nconst state = {\n  token: getToken(),\n  name: '',\n  avatar: '',\n  introduction: '',\n  roles: [],\n  user_id: getUserId()\n}\n\nconst mutations = {\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_INTRODUCTION: (state, introduction) => {\n    state.introduction = introduction\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_ROLES: (state, roles) => {\n    state.roles = roles\n  },\n  SET_USER_ID: (state, user_id) => {\n    state.user_id = user_id + ''\n  },\n}\n\nconst actions = {\n\n  //user register\n  register({commit}, userInfo) {\n    const {user_name, password, password_confirmation} = userInfo\n    console.log(userInfo)\n    return new Promise((resolve, reject) => {\n      register({\n        user_name: user_name.trim(), password: password,\n        password_confirmation: password_confirmation\n      }).then(response => {\n        // const {data} = response\n        // commit('SET_TOKEN', data.token)//?\n        // commit('SET_USER_ID', data.user_id)\n        // setToken(data.token)//?\n        // setUserId(data.user_id)\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user login 改名字\n  login({commit}, userInfo) {\n    const {username, password} = userInfo\n    return new Promise((resolve, reject) => {\n\n      login({user_name: username.trim(), password: password}).then(response => {\n        const {data} = response\n        // store.dispatch('user/resetToken')\n        commit('SET_TOKEN', data.login_token)\n        commit('SET_USER_ID', data.user_id)\n        //let roles = [data.user_role]\n        //commit('SET_ROLES', roles)\n        setToken(data.login_token)\n        setUserId(data.user_id)\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  forceLogin({commit}, userInfo) {\n    const data = {\n      user_id: 0,\n      user_name: 'admin',\n      user_role: 'admin',\n      token: 'admin-token',\n    }\n    commit('SET_TOKEN', data.token)\n    commit('SET_USER_ID', data.user_id)\n    setToken(data.token)\n    setUserId(data.user_id)\n  },\n\n  forceGetInfo({commit, state}) {\n    const name = 'admin'\n    const avatar = 'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif'\n    const introduction = 'this is an admin'\n    commit('SET_NAME', name)\n    commit('SET_AVATAR', avatar)\n    commit('SET_ROLES',  ['admin'])\n    console.log(\"COMMIT ROLE:\" + state.roles)\n    commit('SET_INTRODUCTION', introduction)\n  },\n\n  // get user info\n  getInfo({commit, state}) {\n    return new Promise((resolve, reject) => {\n      getProfile({user_id: state.user_id}).then(response => {\n        const {data} = response\n\n        if (!data) {\n          reject('Verification failed, please Login again.')\n        }\n\n        let {user_role, user_name, user_pic} = data\n\n        //commit('SET_ROLES', roles)\n        let roles = [user_role]\n        commit('SET_NAME', user_name)\n        if (user_pic === null) {\n          user_pic = \"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\"\n        }\n        commit('SET_AVATAR', user_pic)\n        commit('SET_ROLES', roles)\n        console.log(\"COMMIT ROLE:\" + state.roles)\n        //commit('SET_INTRODUCTION', introduction)\n        resolve(data)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  logout({commit, state, dispatch}) {\n    return new Promise((resolve, reject) => {\n      logout(state.token).then(() => {\n        commit('SET_TOKEN', '')\n        commit('SET_USER_ID', 0)\n        commit('SET_ROLES', [])\n        removeToken()\n        removeUserId()\n        removeRole()\n        resetRouter()\n\n        // reset visited views and cached views\n        // to fixed https://github.com/PanJiaChen/vue-element-admin/issues/2485\n        dispatch('tagsView/delAllViews', null, {root: true})\n\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // remove token\n  resetToken({commit}) {\n    return new Promise(resolve => {\n      commit('SET_TOKEN', '')\n      commit('SET_ROLES', [])\n      commit('SET_USER_ID', '')\n      removeToken()\n      removeUserId()\n      removeRole()\n      resolve()\n    })\n  },\n\n  // dynamically modify permissions\n  async changeRoles({commit, dispatch}, role) {\n    const token = role + '-token'\n\n    commit('SET_TOKEN', token)\n    setToken(token)\n\n    const {roles} = await dispatch('getInfo')\n\n    resetRouter()\n\n    // generate accessible routes map based on roles\n    const accessRoutes = await dispatch('permission/generateRoutes', roles, {root: true})\n    // dynamically add accessible routes\n    router.addRoutes(accessRoutes)\n\n    // reset visited views and cached views\n    dispatch('tagsView/delAllViews', null, {root: true})\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"],"mappings":"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"}]}