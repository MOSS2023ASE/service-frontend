{"remainingRequest":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/babel-loader/lib/index.js!/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/src/views/userInfo/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/src/views/userInfo/index.vue","mtime":1680946469685},{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/babel.config.js","mtime":1680943788576},{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/cache-loader/dist/cjs.js","mtime":1680943968418},{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/babel-loader/lib/index.js","mtime":1680943970633},{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/cache-loader/dist/cjs.js","mtime":1680943968418},{"path":"/Users/shl/Desktop/Moss罗杰软工/frontend/buaa2022-db/node_modules/vue-loader/lib/index.js","mtime":1680943969372}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3NobC9EZXNrdG9wL01vc3NcdTdGNTdcdTY3NzBcdThGNkZcdTVERTUvZnJvbnRlbmQvYnVhYTIwMjItZGIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZWR1Y2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFByb2ZpbGUsIHVwZGF0ZUluZm8sIHVwbG9hZEltYWdlIH0gZnJvbSAiQC9hcGkvdXNlciI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKdmFyIGZhdm9yT3B0aW9ucyA9IFt7CiAga2V5OiAn5Y+j5ZGzMScsCiAgZGlzcGxheV9uYW1lOiAn6YW4Jwp9LCB7CiAga2V5OiAn5Y+j5ZGzMicsCiAgZGlzcGxheV9uYW1lOiAn55ScJwp9LCB7CiAga2V5OiAn5Y+j5ZGzMycsCiAgZGlzcGxheV9uYW1lOiAn6L6jJwp9XTsKdmFyIGZhdm9yS2V5VmFsdWUgPSBmYXZvck9wdGlvbnMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGN1cikgewogIGFjY1tjdXIua2V5XSA9IGN1ci5kaXNwbGF5X25hbWU7CiAgcmV0dXJuIGFjYzsKfSwge30pOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImluZGV4IiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgRWRpdERpYWxvZzogZmFsc2UsCiAgICAgIEF2YXRhckRpYWxvZzogZmFsc2UsCiAgICAgIGhlYWRlck9iajogewogICAgICAgIEF1dGhvcml6YXRpb246ICdhN2U5ZDQwOTQzZDdkNjg3NmVkNjk4Y2RkMjVkZmI3MycKICAgICAgfSwKICAgICAgYXZhdGFyVXJsOiAiaHR0cHM6Ly9jdWJlLmVsZW1lY2RuLmNvbS8zLzdjLzNlYTZiZWVjNjQzNjljMjY0MmI5MmM2NzI2ZjFlcG5nLnBuZyIsCiAgICAgIGltZ1VybDogJycsCiAgICAgIHNlbGVjdE1vZGVsOiBbJ3Rhc3RlMScsICd0YXN0ZTInXSwKICAgICAgZmF2b3JzOiBbJ+mFuOeUnCcsICfovqPlkbMnLCAn5riF5rehJywgJ+iLpummmSddLAogICAgICB1c2VyX2luZm86IHsKICAgICAgICB1c2VyX2lkOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJfaWQsCiAgICAgICAgdXNlcl9uYW1lOiAnQWxpY2UnLAogICAgICAgIGNyZWF0ZV90aW1lOiBuZXcgRGF0ZSgpLAogICAgICAgIHVzZXJfcm9sZTogJ3N0dWRlbnQnLAogICAgICAgIHVzZXJfYWdlOiAxLAogICAgICAgIHVzZXJfZ2VuZGVyOiAnZmVtYWxlJywKICAgICAgICB1c2VyX2Zhdm9yOiBbXSwKICAgICAgICB1c2VyX3BpYzogImh0dHBzOi8vY3ViZS5lbGVtZWNkbi5jb20vMy83Yy8zZWE2YmVlYzY0MzY5YzI2NDJiOTJjNjcyNmYxZXBuZy5wbmciCiAgICAgIH0sCiAgICAgIHRlbXA6IHsKICAgICAgICB1c2VyX2lkOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJfaWQsCiAgICAgICAgdXNlcl9uYW1lOiBTdHJpbmcsCiAgICAgICAgdXNlcl9hZ2U6ICcnLAogICAgICAgIHVzZXJfZ2VuZGVyOiAnJywKICAgICAgICB1c2VyX2Zhdm9yOiBbXSwKICAgICAgICB1c2VyX3BpYzogJycKICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWyduYW1lJywgJ2F2YXRhcicsICdyb2xlcycsICd1c2VyX2lkJywgJ3Rva2VuJ10pKSwge30sIHsKICAgIGNyZWF0ZWRfdGltZTogZnVuY3Rpb24gY3JlYXRlZF90aW1lKCkgewogICAgICByZXR1cm4gbmV3IERhdGUoRGF0ZS5wYXJzZSh0aGlzLnVzZXJfaW5mby5jcmVhdGVfdGltZSkpOwogICAgfQogIH0pLAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmhhbmRsZUdldFVzZXJJbmZvKCk7CiAgfSwKICB3YXRjaDogewogICAgbXVsdGlwbGU6IGZ1bmN0aW9uIG11bHRpcGxlKHZhbCkgewogICAgICBpZiAodmFsKSB0aGlzLnNlbGVjdE1vZGVsID0gW3RoaXMuc2VsZWN0TW9kZWxdO2Vsc2UgdGhpcy5zZWxlY3RNb2RlbCA9IHRoaXMuc2VsZWN0TW9kZWxbMF07CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVHZXRVc2VySW5mbzogZnVuY3Rpb24gaGFuZGxlR2V0VXNlckluZm8oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBxdWVyeSA9IHsKICAgICAgICB1c2VyX2lkOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJfaWQKICAgICAgfTsKICAgICAgZ2V0UHJvZmlsZShxdWVyeSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICBfdGhpcy51c2VyX2luZm8gPSByZXMuZGF0YTsKICAgICAgICBfdGhpcy51c2VyX2luZm8uY3JlYXRlX3RpbWUgPSBuZXcgRGF0ZSgrbmV3IERhdGUoX3RoaXMudXNlcl9pbmZvLmNyZWF0ZV90aW1lKSArIDggKiAzNjAwICogMTAwMCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9UL2csICcgJykucmVwbGFjZSgvXC5bXGRdezN9Wi8sICcnKTsKICAgICAgICBfdGhpcy50ZW1wID0gX3RoaXMudXNlcl9pbmZvOwogICAgICAgIF90aGlzLmF2YXRhclVybCA9IHJlcy5kYXRhLnVzZXJfcGljOwogICAgICAgIGlmIChfdGhpcy5hdmF0YXJVcmwgPT09IG51bGwpIHsKICAgICAgICAgIF90aGlzLmF2YXRhclVybCA9ICJodHRwczovL2N1YmUuZWxlbWVjZG4uY29tLzMvN2MvM2VhNmJlZWM2NDM2OWMyNjQyYjkyYzY3MjZmMWVwbmcucG5nIjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNob3dFZGl0RGlhbG9nOiBmdW5jdGlvbiBzaG93RWRpdERpYWxvZygpIHsKICAgICAgdGhpcy5FZGl0RGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBzaG93QXZhdGFyRGlhbG9nOiBmdW5jdGlvbiBzaG93QXZhdGFyRGlhbG9nKCkgewogICAgICB0aGlzLkF2YXRhckRpYWxvZyA9IHRydWU7CiAgICB9LAogICAgaGFuZGxlQ29tbWl0OiBmdW5jdGlvbiBoYW5kbGVDb21taXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgcXVlcnkgPSB0aGlzLnRlbXA7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMudGVtcCk7CiAgICAgIHVwZGF0ZUluZm8ocXVlcnkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgX3RoaXMyLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIuaGFuZGxlR2V0VXNlckluZm8oKTsKICAgICAgICB9KTsKICAgICAgICBfdGhpczIuJG5vdGlmeSh7CiAgICAgICAgICB0aXRsZTogJ1N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueaIkOWKnycsCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdGhpcy5FZGl0RGlhbG9nID0gZmFsc2U7CiAgICB9LAogICAgaGFuZGxlQXZhdGFyU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlQXZhdGFyU3VjY2VzcyhyZXMsIGZpbGUpIHsKICAgICAgdGhpcy5zdWJtaXRVcGxvYWQoKTsKICAgICAgdGhpcy5hdmF0YXJVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUucmF3KTsKICAgICAgdGhpcy5pbWdVcmwgPSB0aGlzLmF2YXRhclVybDsKICAgIH0sCiAgICBzdWJtaXRVcGxvYWQ6IGZ1bmN0aW9uIHN1Ym1pdFVwbG9hZCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHZhciBmaWxlID0gdGhpcy4kcmVmcy51cGxvYWQudXBsb2FkRmlsZXMucG9wKCkucmF3OyAvL+i/memHjOiOt+WPluS4iuS8oOeahOaWh+S7tuWvueixoQogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJpbWFnZSIsIGZpbGUpOwogICAgICB2YXIgcXVlcnkgPSBheGlvcy5jcmVhdGUoewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIHRva2VuOiAnYTdlOWQ0MDk0M2Q3ZDY4NzZlZDY5OGNkZDI1ZGZiNzMnCiAgICAgICAgfQogICAgICB9KTsKICAgICAgcXVlcnkucG9zdCgiaHR0cHM6Ly93d3cuaW1ndHAuY29tL2FwaS91cGxvYWQiLCBmb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMzLnRlbXAudXNlcl9waWMgPSByZXMuZGF0YS5kYXRhLnVybDsKICAgICAgICBfdGhpczMuaGFuZGxlQ29tbWl0KCk7CiAgICAgICAgY29uc29sZS5sb2coX3RoaXMzLnRlbXAudXNlcl9waWMpOwogICAgICB9KTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLmxpc3RMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0sIDEuNSAqIDEwMDApOwogICAgfSwKICAgIGJlZm9yZUF2YXRhclVwbG9hZDogZnVuY3Rpb24gYmVmb3JlQXZhdGFyVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIGlzSlBHID0gZmlsZS50eXBlID09PSAnaW1hZ2UvanBlZyc7CiAgICAgIHZhciBpc0x0Mk0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDI7CiAgICAgIGlmICghaXNKUEcpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpLTlg4/lm77niYflj6rog73mmK8gSlBHIOagvOW8jyEnKTsKICAgICAgfQogICAgICBpZiAoIWlzTHQyTSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWktOWDj+WbvueJh+Wkp+Wwj+S4jeiDvei2hei/hyAyTUIhJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGlzSlBHICYmIGlzTHQyTTsKICAgIH0sCiAgICBjbG9zZVVwbG9hZEF2YXRhcjogZnVuY3Rpb24gY2xvc2VVcGxvYWRBdmF0YXIoKSB7CiAgICAgIHRoaXMuQXZhdGFyRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuaW1nVXJsID0gJyc7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["getProfile","updateInfo","uploadImage","mapGetters","axios","favorOptions","key","display_name","favorKeyValue","reduce","acc","cur","name","data","EditDialog","AvatarDialog","headerObj","Authorization","avatarUrl","imgUrl","selectModel","favors","user_info","user_id","$store","state","user","user_name","create_time","Date","user_role","user_age","user_gender","user_favor","user_pic","temp","String","computed","_objectSpread","created_time","parse","created","handleGetUserInfo","watch","multiple","val","methods","_this","query","then","res","console","log","toISOString","replace","showEditDialog","showAvatarDialog","handleCommit","_this2","$nextTick","$notify","title","message","type","duration","handleAvatarSuccess","file","submitUpload","URL","createObjectURL","raw","_this3","$refs","upload","uploadFiles","pop","formData","FormData","append","create","headers","token","post","url","setTimeout","listLoading","beforeAvatarUpload","isJPG","isLt2M","size","$message","error","closeUploadAvatar"],"sources":["src/views/userInfo/index.vue"],"sourcesContent":["<template>\n  <div style=\"background-color: white\">\n    <!--  上部简要信息-->\n\n    <v-card style=\"background-color: whitesmoke\">\n      <el-row type=\"flex\" style=\"flex-direction: row\" align=\"middle\">\n        <el-col :offset=\"1\" :span=\"3\" style=\"display: flex;flex-direction: column;justify-content: center\">\n          <el-avatar :size=\"180\" :src=\"avatarUrl\"></el-avatar>\n          <v-btn type=\"primary\" @click=\"showAvatarDialog()\" style=\"margin-top: 1vh\">更换头像</v-btn>\n        </el-col>\n        <el-col :offset=\"2\" :span=\"16\" style=\"display: flex;flex-direction: column;justify-content: space-around\">\n          <v-card-title>用户名</v-card-title>\n          <v-card-subtitle>{{ this.user_info.user_name }}</v-card-subtitle>\n          <v-divider></v-divider>\n          <v-card-title>注册时间</v-card-title>\n          <v-card-subtitle>{{ this.created_time }}</v-card-subtitle>\n          <v-divider></v-divider>\n          <v-card-title>用户角色</v-card-title>\n          <v-card-subtitle>{{ this.user_info.user_role }}</v-card-subtitle>\n        </el-col>\n      </el-row>\n\n    </v-card>\n\n    <el-row :gutter=\"20\" style=\"margin-top: 5vh\" type=\"flex\" justify=\"end\">\n      <el-col :span=\"8\">\n        <el-button type=\"success\" @click=\"showEditDialog()\">编辑</el-button>\n      </el-col>\n    </el-row>\n    <el-row style=\"margin-top: 5vh\" type=\"flex\" justify=\"space-around\">\n      <el-col :span=\"8\">\n        <v-form\n          label-position=\"left\"\n          label-width=\"120px\">\n          <v-text-field label=\"年龄\" v-model=\"temp.user_age\" :counter=\"3\" required>\n          </v-text-field>\n          <v-text-field label=\"性别\" v-model=\"temp.user_gender\" :counter=\"10\" required>\n          </v-text-field>\n          <!--          <v-list-item>-->\n          <!--            <label class=\"v-label v-label&#45;&#45;active theme&#45;&#45;light\"-->\n          <!--                   style=\"left: 1mm; right: auto; position: absolute;font-size: small\">-->\n          <!--              口味</label>-->\n          <!--          </v-list-item>-->\n          <v-select\n            v-model=\"temp.user_favor\"\n            :items=\"favors\"\n            :menu-props=\"{maxHeight: '400'}\"\n            multiple\n            chips\n            hint=\"Pick your favorite favor\"\n            presistent-hint\n            label=\"口味\"\n          >\n            <template v-if=\"true\" v-slot:selection=\"{ item, index }\">\n              <v-chip>\n                <span>{{ item }}</span>\n              </v-chip>\n              <!--              <span-->\n              <!--                v-if=\"index === 1\"-->\n              <!--                class=\"grey&#45;&#45;text caption\"-->\n              <!--              >(+{{ selectModel.length - 1 }} others)</span>-->\n            </template>\n          </v-select>\n        </v-form>\n      </el-col>\n    </el-row>\n    <v-row justify=\"center\">\n      <v-dialog v-model=\"EditDialog\" width=\"250px\">\n        <v-toolbar\n          color=\"green lighten-1\"\n          dark\n        >\n          <v-toolbar-title>确认提交编辑吗？</v-toolbar-title>\n          <v-spacer></v-spacer>\n          <v-btn icon @click=\"EditDialog=false\">\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n        </v-toolbar>\n        <v-card\n          style=\"display:flex;justify-content: center\"\n        >\n          <v-btn\n            icon\n            @click=\"handleCommit()\"\n          >\n            <v-icon>\n              mdi-check\n            </v-icon>\n          </v-btn>\n        </v-card>\n      </v-dialog>\n    </v-row>\n\n    <v-row>\n      <v-dialog v-model=\"AvatarDialog\" width=\"300px\">\n        <v-toolbar\n          color=\"orange lighten-2\"\n          dark\n        >\n          <v-spacer></v-spacer>\n          <v-toolbar-title>更换头像</v-toolbar-title>\n          <v-spacer></v-spacer>\n          <v-btn icon @click=\"closeUploadAvatar()\">\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n        </v-toolbar>\n        <v-card style=\"display: flex;justify-content: center\">\n          <!--                    action=\"https://api.superbed.cn/upload?token=8b5da5e83eb94c2aac547844c1f34c29\"-->\n          <el-upload\n            class=\"avatar-uploader\"\n            ref=\"upload\"\n            action=\"https://www.imgtp.com/api/upload\"\n            :headers=\"headerObj\"\n            :show-file-list=\"false\"\n            :on-success=\"handleAvatarSuccess\"\n            :before-upload=\"beforeAvatarUpload\"\n            :with-credentials=\"false\">\n            <img v-if=\"imgUrl\" :src=\"imgUrl\" class=\"avatar\" alt=\"\">\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n        </v-card>\n      </v-dialog>\n    </v-row>\n  </div>\n</template>\n\n<script>\nimport {getProfile, updateInfo, uploadImage} from \"@/api/user\";\nimport {mapGetters} from \"vuex\";\nimport axios from \"axios\";\n\n\nconst favorOptions = [\n  {key: '口味1', display_name: '酸'},\n  {key: '口味2', display_name: '甜'},\n  {key: '口味3', display_name: '辣'},\n]\n\nconst favorKeyValue = favorOptions.reduce((acc, cur) => {\n  acc[cur.key] = cur.display_name\n  return acc\n}, {})\n\nexport default {\n  name: \"index\",\n  data() {\n    return {\n      EditDialog: false,\n      AvatarDialog: false,\n      headerObj: {\n        Authorization: 'a7e9d40943d7d6876ed698cdd25dfb73'\n      },\n      avatarUrl: \"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\",\n      imgUrl: '',\n      selectModel: ['taste1', 'taste2'],\n      favors: ['酸甜', '辣味', '清淡', '苦香'],\n      user_info: {\n        user_id: this.$store.state.user.user_id,\n        user_name: 'Alice',\n        create_time: new Date(),\n        user_role: 'student',\n        user_age: 1,\n        user_gender: 'female',\n        user_favor: [],\n        user_pic: \"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\"\n      },\n      temp: {\n        user_id: this.$store.state.user.user_id,\n        user_name: String,\n        user_age: '',\n        user_gender: '',\n        user_favor: [],\n        user_pic: ''\n      },\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'name',\n      'avatar',\n      'roles',\n      'user_id',\n      'token'\n    ]),\n    created_time() {\n      return new Date(Date.parse(this.user_info.create_time))\n    }\n  },\n  created() {\n    this.handleGetUserInfo()\n  },\n  watch: {\n    multiple(val) {\n      if (val) this.selectModel = [this.selectModel]\n      else this.selectModel = this.selectModel[0]\n    },\n  },\n  methods: {\n    handleGetUserInfo() {\n      let query = {user_id: this.$store.state.user.user_id}\n      getProfile(query).then((res) => {\n        console.log(res)\n        this.user_info = res.data\n        this.user_info.create_time = new Date(+new Date(this.user_info.create_time) + 8 * 3600 * 1000).toISOString().replace(/T/g, ' ').replace(/\\.[\\d]{3}Z/, '')\n        this.temp = this.user_info\n        this.avatarUrl = res.data.user_pic\n        if (this.avatarUrl === null) {\n          this.avatarUrl = \"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\"\n        }\n      })\n    },\n\n    showEditDialog() {\n      this.EditDialog = true\n    },\n    showAvatarDialog() {\n      this.AvatarDialog = true\n    },\n    handleCommit() {\n      let query = this.temp\n      console.log(this.temp)\n      updateInfo(query).then((res) => {\n        console.log(res)\n        this.$nextTick(() => {\n          this.handleGetUserInfo()\n        })\n        this.$notify({\n          title: 'Success',\n          message: '修改成功',\n          type: 'success',\n          duration: 2000\n        })\n      })\n      this.EditDialog = false\n    },\n    handleAvatarSuccess(res, file) {\n      this.submitUpload()\n\n      this.avatarUrl = URL.createObjectURL(file.raw);\n\n      this.imgUrl = this.avatarUrl\n    },\n    submitUpload() {\n      let file = this.$refs.upload.uploadFiles.pop().raw//这里获取上传的文件对象\n      let formData = new FormData()\n      formData.append(\"image\", file)\n      let query = axios.create({\n        headers: {\n          token: 'a7e9d40943d7d6876ed698cdd25dfb73'\n        }\n      })\n      query.post(\"https://www.imgtp.com/api/upload\", formData).then(res => {\n        this.temp.user_pic = res.data.data.url\n        this.handleCommit()\n        console.log(this.temp.user_pic)\n      })\n      setTimeout(() => {\n        this.listLoading = false\n      }, 1.5 * 1000)\n    },\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === 'image/jpeg';\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG 格式!');\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n      return isJPG && isLt2M;\n    },\n    closeUploadAvatar() {\n      this.AvatarDialog = false\n      this.imgUrl = ''\n    }\n  }\n}\n</script>\n\n<style scoped>\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n</style>\n"],"mappings":"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"}]}